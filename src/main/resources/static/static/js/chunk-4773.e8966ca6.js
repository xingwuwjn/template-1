(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4773"],{"82H3":function(e,t,n){"use strict";n.r(t);var a=n("s8mb"),i=n("XJYT"),o={data:function(){return{props:{label:"name",children:"children"},newRole:"",newRoleZh:"",roles:[],treeData:[],checkedKeys:[],loading:!1,activeColItem:-1}},mounted:function(){this.loading=!0,this.initRoles()},methods:{deleteRole:function(e,t){var n=this;this.$confirm("删除角色["+t+"], 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.loading=!0,Object(a.c)(e).then(function(e){e&&200===e.status?n.initRoles():n.loading=!1})}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},addNewRole:function(){if(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var a=0;a<t.length;a++){var o=t[a];if(null==o||""===o||void 0===o)return i.Message.warning({message:"数据不能为空!"}),!1}return!0}(this.newRole,this.newRoleZh)){this.loading=!0;var e=this;Object(a.a)({role:this.newRole,roleZh:this.newRoleZh}).then(function(t){t&&200===t.status?(e.initRoles(),e.newRole="",e.newRoleZh=""):e.loading=!1})}},updateRoleMenu:function(e){var t=this.$refs.tree[e].getCheckedKeys(!0),n=this;Object(a.i)({rid:this.activeColItem,mids:t}).then(function(e){e&&200===e.status&&(n.activeColItem=-1)})},collapseChange:function(e){if(""!==e){var t=this;Object(a.h)(e).then(function(e){if(e&&200===e.status){var n=e.data;t.treeData=n.menus,t.checkedKeys=n.mids}})}},handleCheckChange:function(e,t,n){},initRoles:function(){var e=this;Object(a.e)().then(function(t){e.loading=!1,t&&200===t.status&&(e.roles=t.data,e.activeColItem=-1)})},cancelUpdateRoleMenu:function(){this.activeColItem=-1}}},l=n("KHd+"),r=Object(l.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"text-align":"left"}},[n("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入角色英文名称...",size:"mini"},model:{value:e.newRole,callback:function(t){e.newRole=t},expression:"newRole"}},[n("template",{slot:"prepend"},[e._v("ROLE_")])],2),e._v(" "),n("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入角色中文名称...",size:"mini"},model:{value:e.newRoleZh,callback:function(t){e.newRoleZh=t},expression:"newRoleZh"}}),e._v(" "),n("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini"},on:{click:e.addNewRole}},[e._v("添加角色")])],1),e._v(" "),n("div",{staticStyle:{"margin-top":"10px","text-align":"left"}},[n("el-collapse",{staticStyle:{width:"500px"},attrs:{accordion:""},on:{change:e.collapseChange},model:{value:e.activeColItem,callback:function(t){e.activeColItem=t},expression:"activeColItem"}},e._l(e.roles,function(t,a){return n("el-collapse-item",{key:t.name,attrs:{title:t.nameZh,name:t.id}},[n("el-card",{staticClass:"box-card"},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("可访问的资源")]),e._v(" "),n("el-button",{staticStyle:{color:"#f6061b",margin:"0px",float:"right",padding:"3px 0",width:"15px",height:"15px"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(n){e.deleteRole(t.id,t.nameZh)}}})],1),e._v(" "),n("div",[n("el-tree",{key:t.id,ref:"tree",refInFor:!0,attrs:{props:e.props,data:e.treeData,"default-checked-keys":e.checkedKeys,"node-key":"id","show-checkbox":"","highlight-current":""},on:{"check-change":e.handleCheckChange}})],1),e._v(" "),n("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-right":"10px"}},[n("el-button",{attrs:{size:"mini"},on:{click:e.cancelUpdateRoleMenu}},[e._v("取消修改")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.updateRoleMenu(a)}}},[e._v("确认修改")])],1)])],1)}))],1)])},[],!1,null,null,null);r.options.__file="MenuRole.vue";t.default=r.exports},s8mb:function(e,t,n){"use strict";n.d(t,"f",function(){return i}),n.d(t,"g",function(){return o}),n.d(t,"b",function(){return l}),n.d(t,"j",function(){return r}),n.d(t,"k",function(){return s}),n.d(t,"e",function(){return c}),n.d(t,"a",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"i",function(){return h}),n.d(t,"h",function(){return f}),n.d(t,"d",function(){return m});var a=n("t3Un");function i(e){return Object(a.a)({url:"/sys/users/"+e,method:"get",params:{searchWords:e}})}function o(e){return Object(a.a)({url:"/sys/users/"+e,method:"get"})}function l(e){return Object(a.a)({url:"/sys/users/"+e,method:"delete"})}function r(e,t){return Object(a.a)({url:"/sys/users/updateuser/",method:"put",data:{enabled:e,id:t}})}function s(e,t){return Object(a.a)({url:"/sys/users/updateuserrole/",method:"put",data:{hrId:e,rids:t}})}function c(){return Object(a.a)({url:"/sys/basic/roles",method:"get"})}function u(e,t){return Object(a.a)({url:"/sys/basic/addRole",method:"post",params:{role:e,roleZh:t}})}function d(e){return Object(a.a)({url:"/sys/basic/role/"+e,method:"delete"})}function h(e,t){return Object(a.a)({url:"/sys/basic/updateMenuRole",method:"post",data:{rid:e,mids:t}})}function f(e){return Object(a.a)({url:"/sys/basic/menuTree/"+e,method:"get"})}function m(){return Object(a.a)({url:"/basic/sysmenu/",method:"get"})}},xatG:function(e,t,n){"use strict";n.r(t);var a={components:{"menu-role":n("82H3").default},data:function(){return{defaultTab:"menuRole"}},methods:{}},i=n("KHd+"),o=Object(i.a)(a,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"10px"}},[n("el-tabs",{attrs:{type:"card"},model:{value:e.defaultTab,callback:function(t){e.defaultTab=t},expression:"defaultTab"}},[n("el-tab-pane",{attrs:{label:"权限组",name:"menuRole"}},[n("menu-role")],1)],1)],1)},[],!1,null,null,null);o.options.__file="SysBasic.vue";t.default=o.exports}}]);